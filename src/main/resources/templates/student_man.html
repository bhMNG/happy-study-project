<div style="width: 80%;" id="stuman-content">

<!-- Stutable -->
<div v-if="paneSwitch.isStutableShow" style="position: relative;">
	<div style="background:rgba(0,0,0,0.8); background: #fff">
	<table class="table table-bordered">
		<thead>
			<tr>
				<th>学号</th>
				<th>姓名</th>
				<th>性别</th>
				<th>年龄</th>
				<th>入学时间</th>
				<th>所属学院</th>
				<th>就读班级</th>
				<th>账号</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
	</div>
	
	<!-- 按钮空间栏 -->
	<div>
		<button type="button" class="btn btn-success">添加学生</button>
		<button type="button" class="btn btn-primary">批量导入</button>
		<button type="button" class="btn btn-danger">批量删除</button>
	</div>
	
	<!-- 页脚分页 -->
	<div style="text-align: center" id="paggingSelect">
		
		<div>
		<nav aria-label="Page navigation" id="pagePane">
  			<ul class="pagination">
  				<li>
      				<a href="javascript://" aria-label="Previous" @click="goToPage(1)">首页
        			<span aria-hidden="true">&laquo;</span>
     			 	</a>
    			</li>
    			<li>
      			<a href="#" aria-label="Previous" @click="goToPage(queryPage.currentPage-1)">
        			<span aria-hidden="true">&laquo;</span>
     			 </a>
    			</li>
    			<!-- 前省略号 -->
    			<li v-for="i in 1" class="toPageBtn" 
    				v-show="queryPage.pageBeforeOmit">
    				<a href="#">...</a>
    				
    			</li>
    			<li v-for="i in queryPage.pageCount" class="toPageBtn" 
    				v-show="queryPage.pageBuffer[i-1]=='0'">
    				<a href="#" @click="goToPage(i)">{{i}}</a>
    				
    			</li>
    			<!-- 后省略号 -->
    			<li v-for="i in 1" class="toPageBtn" 
    				v-show="queryPage.pageAfterOmit">
    				<a href="#">...</a>
    				
    			</li>
    			<li>
      				<a href="#" aria-label="Next"  @click="goToPage(queryPage.currentPage+1)">
        			<span aria-hidden="true">&raquo;</span>
      				</a>
    			</li>
    			<li>
      				<a href="javascript://" aria-label="Next" @click="goToPage(queryPage.pageCount)">
        			<span aria-hidden="true">&raquo;</span>
        			尾页
      				</a>
    			</li>
  			</ul>
		</nav>
		</div>
	</div>
</div>

<!-- QueryGradePane -->
<div v-if="paneSwitch.queryGradeShow">
	<div style="background: #fff; margin-top: 50px;">
		<table class="table table-striped"> 
			<thead>
				<tr>
					<th>课程号</th>
					<th>课程名</th>
					<th>分数</th>
					<th>合格</th>
				<tr>
			</thead>
			<tbody>
				<tr>
					<td><a href="#">001</a></td>
					<td>Java</td>
					<td>99</td>
					<td>合格</td>
				</tr>
			</tbody>
		</table>
	</div>
	<!-- 按钮栏 -->
	<div style="width: 96%; display: flex; flex-direction: row; justify-content: space-around;">
		<!-- left -->
		<div style="width: 45%; background: rgba(0, 0, 0, 0.3); box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4);
             box-sizing: border-box; border-bottom: 1px solid;">
		<button type="button" class="btn btn-primary btn-info">
			 <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> 最高成绩 </button>
		<button type="button" class="btn btn-primary btn-warning" style="margin-left: 40px; margin-right: 40px;">
			 <span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span> 最低成绩 </button>
		<button type="button" class="btn btn-primary btn-danger">
			 <span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span> 未过课程 </button>
		<div style="width: 94%; margin-top: 10px;">
			<button class="btn btn-primary btn-lg btn-block"> 
				<span class="glyphicon glyphicon-signal" aria-hidden="true"></span> 图表统计</button>
		</div>
		</div>
		<!-- right -->
		<div style="width: 45%; background: rgba(0, 0, 0, 0.3); box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4);
             box-sizing: border-box; border-bottom: 1px solid;">
             <!-- 统计图标 -->
		</div>
	</div>
</div>

<!-- ChooseCoursePane -->
<div v-if="paneSwitch.chooseCourseShow" id="chooseCoursePane">
	<div  style="background: #fff; margin-top: 50px;" v-show="!courseMess.showChoosedCourse">
		<h3 style="background: #f4f4f4; padding-top: 10px; padding-bottom: 10px;">课程信息</h3>
		<br/>
		<table class="table table-striped mesTable">
			<thead>
				<tr>
					<th>课程号</th>
					<th>课程名</th>
					<th>负责老师</th>
					<th>当前人数</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>001</td>
					<td>java</td>
					<td>陈科</td>
					<td>当前人数</td>
					<td style="padding-top: 8px; padding-bottom: 8px;"><button class="btn btn-warning">确认选课</button></td>
				</tr>
			</tbody>
		</table>
		<!-- 分页 -->
		<div>
		<nav aria-label="Page navigation" id="pagePane">
  			<ul class="pagination">
  				<li>
      				<a href="javascript://" aria-label="Previous" @click="goToPage(1)">首页
        			<span aria-hidden="true">&laquo;</span>
     			 	</a>
    			</li>
    			<li>
      			<a href="#" aria-label="Previous" @click="goToPage(queryPage.currentPage-1)">
        			<span aria-hidden="true">&laquo;</span>
     			 </a>
    			</li>
    			<!-- 前省略号 -->
    			<li v-for="i in 1" class="toPageBtn" 
    				v-show="queryPage.pageBeforeOmit">
    				<a href="#">...</a>
    				
    			</li>
    			<li v-for="i in queryPage.pageCount" class="toPageBtn" 
    				v-show="queryPage.pageBuffer[i-1]=='0'">
    				<a href="#" @click="goToPage(i)">{{i}}</a>
    				
    			</li>
    			<!-- 后省略号 -->
    			<li v-for="i in 1" class="toPageBtn" 
    				v-show="queryPage.pageAfterOmit">
    				<a href="#">...</a>
    				
    			</li>
    			<li>
      				<a href="#" aria-label="Next"  @click="goToPage(queryPage.currentPage+1)">
        			<span aria-hidden="true">&raquo;</span>
      				</a>
    			</li>
    			<li>
      				<a href="javascript://" aria-label="Next" @click="goToPage(queryPage.pageCount)">
        			<span aria-hidden="true">&raquo;</span>
        			尾页
      				</a>
    			</li>
  			</ul>
		</nav>
		</div>
	</div>
	
	<!-- 已选课程 -->
	<div class="pre-scrollable panel-body" style="height: 400px; overflow:scroll; background: #fff;margin-top: 50px;
		background: rgba(0, 0, 0, 0.3); box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4);box-sizing: border-box; 
		border-bottom: 1px solid; overflow-x: hidden;"
		v-show="courseMess.showChoosedCourse" >
		<div class="innerbox" style="border: 1px  #000000; width: 90%; margin: 0 auto;"
			v-for="course in courseMess.choosedCourse">
			<div  style="background: white; height: 80px; margin-bottom: 10px;">
				<div style="display: flex; flex-direction: row; height: 100%">
					<div style="height: 100%; flex:1; position: relative;">
						<p style="position:absolute; top: 40%;">{{course.name}}</p>
					</div>
					<div style="height: 100%; flex:1; position: relative;">
						<p style="position:absolute; top: 40%;">{{course.teacher}}</p>
					</div>
					<div style="height: 100%; flex:1; position: relative;">
						<p style="position:absolute; top: 40%;">{{course.stuCount}}</p>
					</div>
					
				</div>
			</div>
		</div>
	
	</div>
	<!-- 打开已选课程按钮 -->
	<div style="width: 60%;margin-top: 20px;">
		<button class="btn btn-default btn-lg btn-block" @click="showChoosedCourse">查看已选课程</button>
	</div>
</div>

<!-- 导航脚 -->
<div style="bottom: 10px; width: 70%; bottom: 0px; position: absolute;" >
	<nav class="navbar navbar-inverse" style="">
		<div class="container" style="width: 100%">
			<div class="span6">
				<ul class="nav nav-tabs" style="">
					<li class="active"><a href="#">学生管理</a></li>
                	<li><a href="javascript://" @click="openStutable">总览列表</a></li>
                	<li><a href="javascript://" @click="openQueryGradePane">成绩查询</a></li>
                	<li><a href="javascript://" @click="openChooseCoursePane">学生选课</a></li>
				</ul>
			</div>
		</div>
	</nav>
	
</div>

<!-- ./content -->
</div>

<script>
	var vue = new Vue({
		el : "#stuman-content",
		data : {
			courseMess : {
				showChoosedCourse : false,
				choosedCourse : [{
					name : "java",
					teacher : "陈科",
					stuCount : 73,
				}],
			},
			queryPage : {
				currentPage : 1,
				pageSize : 5,
				pageCount : 3,
				allRowCount : 13,
				liCount : [],
				pageBuffer : [],
				pageBeforeOmit : false,
				pageAffterOmit : true,
			},
			paneSwitch : {
				isStutableShow : false,
				queryGradeShow : false,
				chooseCourseShow : false,
				
			}
		},
		methods : {
			showChoosedCourse : function(){
				if (vue.courseMess.showChoosedCourse == true){
					vue.courseMess.showChoosedCourse = false;
				}else{
					vue.courseMess.showChoosedCourse = true;
				}
			},
			initPaneSwitch : function(){
				vue.paneSwitch.isStutableShow = false;
				vue.paneSwitch.queryGradeShow = false;
				vue.paneSwitch.chooseCourseShow = false;
			},
			openChooseCoursePane : function(){
				this.initPaneSwitch();
				vue.paneSwitch.chooseCourseShow = true;
			},
			openQueryGradePane : function(){
				this.initPaneSwitch();
				vue.paneSwitch.queryGradeShow = true;
			},
			openStutable : function(){
				this.initPaneSwitch();
				this.paneSwitch.isStutableShow = true;
			},
			queryStudentCourse : function(){
				this.updatePageNav
			},
			queryStudent : function(){
				this.updatePageNav();
			},
			updatePageNav : function(){
				vue.queryPage.pageBuffer = [];
				for (var i = 1; i <= this.queryPage.pageCount; i++){
					if ((this.queryPage.currentPage-3<i&&i<3+this.queryPage.currentPage)){
						vue.queryPage.pageBuffer.push("0");
					}else{
						vue.queryPage.pageBuffer.push("1");
					}

				}
				if (this.queryPage.currentPage - 1 > 2){
					this.queryPage.pageBeforeOmit = true;
				}else{
					this.queryPage.pageBeforeOmit = false;
				}
				if (this.queryPage.currentPage < this.queryPage.pageCount - 2){
					this.queryPage.pageAfterOmit = true;
					console.log("!!");
					console.log(this.queryPage.pageAfterOmit);
				}else{
					this.queryPage.pageAfterOmit = false;
					console.log("--");
					console.log(this.queryPage.pageAfterOmit);
				}
				console.log("倒数第三页"+(this.queryPage.pageCount - 2));
				console.log("当前页"+this.queryPage.currentPage)
			},
			goToPage : function(page){
				if (page < 1){
					alert("已经是第一页啦");
					return ;
				}
				if (page > this.queryPage.pageCount) {
					alert("已经到底啦");
					return ;
				}
				this.queryPage.currentPage = page;
				console.log("go to page " + this.queryPage.currentPage);
				this.queryStudent();
			},
		},
		mounted : function(){
			
		},
	});
	
	$(function(){
		$("#DynamicMarquee").text("Welcome to Happy-Study!"+"    "+"---StudentManagement")
		
	})
	
</script>
